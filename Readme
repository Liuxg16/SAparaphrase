# Env
python 3.5
nltk
pip3 install python-zpar

# dataset
twitter: https://languagenet.github.io/

# test bert
CUDA_VISIBLE_DEVICES=1 python3 bertinterface.py

# sampling
# hm
python3 source/run.py --no_train  --exps_dir test --exp_name test --gpu 1  --mode mh  --forward_path exps/forward/ckpt/model-best.pkl  --backward_path exps/backward/ckpt/model-best.pkl  --hidden_size 512 --sample_time 100  --search_size 100  --data_path data/quora/test.txt --sim_mode keyword  --save_path log.log  --use_data_path data/input/input.txt --reference_path data/input/refer.txt
# basic sa
python3 source/run.py --data_path data/input/input.txt --use_data_path data/input/test.txt --mode kw-bleu --save_path temp.txt  --N_repeat 1  --save_path temp.txt  --batch_size 1 --gpu 2


# basic sa batch
python3 source/run.py --data_path data/input/input.txt --use_data_path data/input/test.txt --mode kw --save_path temp.txt  --N_repeat 1  --save_path temp.txt  --batch_size 3 --gpu 2
#coco
python source/run.py --data_path data/input/input.txt --use_data_path data/cocodata/test_source.txt  --mode kw-bleu  --N_repeat 1  --save_path sa-coco-searchsize50.txt --search_size 50  --batch_size 6  --gpu 0  --forward_save_path data/cocomodel/forward.ckpt --backward_save_path data/cocomodel/backward.ckpt --dict_path data/cocodata/dict.pkl  --emb_path data/cocodata/emb.pkl

# evaluate
## links
### https://github.com/Maluuba/nlg-eval
python3 source/evaluate.py --reference_path data/quora/test.txt  --generated_path sa-keyword.txt
python source/evaluate.py --reference_path data/cocodata/refer_8479-.txt  --generated_path sa-coco-searchsize50-8479-.txt --mode rouge

nlg-eval --hypothesis=tem.txt --references=sa-coco-searchsize50-8479-.txt
